##1、工具下载地址
[akpktool](https://ibotpeaches.github.io/Apktool/ )
[JD_GUI](http://jd.benow.ca/ )
[dex2jar](https://sourceforge.net/projects/dex2jar/)

apktool主要用户反编译和打包；
JD-GUI 主要用于对.class文件展示为源码（比如jar文件）
dex2jar 主要用于将dex文件转化为jar文件
##2、执行反编译语句
```
apktool.sh d xxx.apk
```
便可以在当前目录下生成一个xxx（app名称）文件夹
##3、dex2jar生成jar文件
* 将apk文件后缀名直接改为.zip，并解压。得到其中的classes.dex文件 ，它就是java源代码经过编译再通过dx工具打包而成的。
* 将classes.dex文件复制到dex2jar所在的文件夹。
* 命令行下定位到dex2jar目录，运行
```
sh dex2jar.sh classes.dex
```


##4、使用jd-gui查看生成的jar包


##5、apktool 使用各种坑总结



* apktool error: No resource identifier found for attribute ‘keyboardNavigationCluster’ in package ‘android’

```
参考了该文章：

https://blog.csdn.net/lkxlkx777/article/details/83271143

在apktool的目录下运行命令

java -jar yourApktoolName.jar empty-framework-dir

清理掉相关的东西，提示：I: Removing 1.apk framework file…

然后就重新执行 b 命令打包编译即可
```

* https://www.cnblogs.com/mliangchen/p/5084961.html

* 重新打包

```
1.回编译apkapktool b files
files就是对应刚刚修改的apk文件夹，执行完后会重新生成一个apk文件

注意：编译后的apk是安装不成功的，总是提示 Failure [INSTALL_PARSE_FAILED_UNEXPECTED_EXCEPTION]，实质是没签名。

2.生成签名:
keytool -genkey -keystore coolapk.keystore -keyalg RSA -validity 10000 -alias coolapk

注意：上面-keystore后面跟的是签名文件的名字，而-alias是别名，一般情况下-keystore后面跟-alias是一样的，但其实两者没有关系，这也是我故意搞成不一样的原因。

3.为apk增加签名：
jarsigner -digestalg SHA1 -sigalg MD5withRSA -tsa -verbose -keystore coolapk.keystore -signedjar coolapk-signed.apk coolapk.apk coolapk

注意：
1.最后的”coolapk”就是－alias后面带的，必须保持一致
2.如果不带-digestalg SHA1 -sigalg MD5withRSA签名后的apk安装也会不成功，INSTALL_PARSE_FAILED_NO_CERTIFICATES的错误，如果不带-tsa会报一个时间方面的警告.


jarsigner -verbose -sigalg SHA1withRSA   -digestalg SHA1 -keystore demo.keystore -storepass 2121369 test.apk demo


```



##6、逆向 Fully-kiosk-booswer 的经验总结
 
  * apktool 反编译 apk
  * 使用 dex2jar 将 dex转jar
  * 使用JD-GUI查看
  * 找关键class文件，对应的smali文件可能有真正的类名描述，我找到的at.class 看到at.smali文件中有"LicenseManager.java"描述，更加确定找对位置了
  * 通过不停的修改验证，时间加上运气，破解成功
  * smali语言不熟悉可以通过将java 转换smali验证学习，Android Studio 有相关插件 java2smali
  * 公司的集成工具 AndroidCrackTool工具反编译无效，可能是版本过低，所以折腾好久用单独的apktool
  * 相关链接：https://www.52pojie.cn/thread-687375-1-1.html ， https://www.cnblogs.com/sevck/p/6844513.html，
https://www.cnblogs.com/yanzheng216/articles/6378843.html，https://blog.csdn.net/zgzczzw/article/details/52669215，https://blog.csdn.net/sxk874890728/article/details/80486223
  



